/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

'use client';

import { type Address } from '@solana/kit';
import { useEffect, useState } from 'react';
import { findCounterPda, type CounterSeeds } from '../../';

type useCounterAddressConfig = {
    programAddress?: Address;
};

export function useCounterAddress(seeds: CounterSeeds, config: useCounterAddressConfig = {}) {
    const [address, setAddress] = useState<Address | null>(null);
    const [status, setStatus] = useState<'idle' | 'loading' | 'success' | 'error'>('idle');
    const [error, setError] = useState<Error | null>(null);

    useEffect(() => {
        let cancelled = false;
        setStatus('loading');

        (async () => {
            try {
                const [pda] = await findCounterPda(seeds, { programAddress: config.programAddress });
                if (!cancelled) {
                    setAddress(pda);
                    setStatus('success');
                }
            } catch (e) {
                if (!cancelled) {
                    setError(e instanceof Error ? e : new Error(String(e)));
                    setStatus('error');
                }
            }
        })();

        return () => {
            cancelled = true;
        };
    }, [seeds, config.programAddress]);

    return { address, error, status };
}
